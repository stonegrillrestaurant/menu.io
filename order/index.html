<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Document Basics -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Stone Grill's  â€” Online Reservation</title>

  <!-- Meta Pixel Code -->
  <script>
    !function(f,b,e,v,n,t,s)
    {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
    n.callMethod.apply(n,arguments):n.queue.push(arguments)};
    if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
    n.queue=[];t=b.createElement(e);t.async=!0;
    t.src=v;s=b.getElementsByTagName(e)[0];
    s.parentNode.insertBefore(t,s)}(window, document,'script',
    'https://connect.facebook.net/en_US/fbevents.js');
    fbq('init', '643206718690040');
    fbq('track', 'PageView');
  </script>
  <noscript>
    <img height="1" width="1" style="display:none"
         src="https://www.facebook.com/tr?id=643206718690040&ev=PageView&noscript=1" />
  </noscript>
  <!-- End Meta Pixel Code -->

  <!-- Basic SEO -->
  <meta name="description" content="Order sizzling plates, fresh seafood, and Filipino favorites from Stone Grill Restaurant in Leyte. Dine-in or take-out â€” fast, easy, and delicious!">
  <meta name="keywords" content="Stone Grill, Stone Grill Restaurant, sizzling plates, seafood Leyte, Filipino food, online order, dine-in, take-out, Bato Leyte restaurant">
  <meta name="author" content="Stone Grill Restaurant">
  <link rel="canonical" href="https://stonegrillresto.net/order/">

  <!-- Open Graph -->
  <meta property="og:title" content="Stone Grill Restaurant â€” Order Online">
  <meta property="og:description" content="Enjoy hot sizzling meals, seafood platters, and more â€” order online for dine-in or take-out at Stone Grill Restaurant, Leyte.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://stonegrillresto.net/order/">
  <meta property="og:site_name" content="Stone Grill Restaurant">
  <meta property="og:image" content="https://stonegrillresto.net/order/assets/og-order.jpg">
  <meta property="fb:app_id" content="2895055444086567">

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Stone Grill Restaurant â€” Order Online">
  <meta name="twitter:description" content="Order sizzling plates, seafood, and Filipino favorites from Stone Grill Restaurant.">
  <meta name="twitter:image" content="https://stonegrillresto.net/order/assets/og-order.jpg">

  <!-- Theme / Icons / CSS -->
  <meta name="theme-color" content="#8db600">
  <link rel="icon" href="assets/icons/favicon-32.png" sizes="32x32">
  <link rel="apple-touch-icon" href="assets/icons/apple-touch-180.png">
  <link rel="stylesheet" href="style.css?v=13">

  <!-- JSON-LD Structured Data -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Restaurant",
    "name": "Stone Grill Restaurant",
    "image": "https://stonegrillresto.net/order/assets/og-order.jpg",
    "description": "Sizzling plates, seafood, and Filipino favorites. Order online for dine-in or take-out.",
    "address": { "@type": "PostalAddress", "addressCountry": "PH" },
    "telephone": "+63 53 568 0539",
    "email": "stonegrill2014@gmail.com",
    "url": "https://stonegrillresto.net/",
    "sameAs": ["https://www.facebook.com/stonecitygrill"]
  }
  </script>

  <!-- Minimal styles for popup + centered toast -->
  <style>
    .gcash-number { font-size:1.1rem; letter-spacing:.5px; font-weight:600; }
    .receipt-upload-block { margin-top:12px; padding:12px; border-radius:10px; background:rgba(0,0,0,0.04); }
    .receipt-upload-block h4 { margin:0 0 8px; font-size:1.02rem; }
    .receipt-status { margin-top:8px; font-size:.92rem; }
    .popup .meta { font-size:.9rem; color:#666; margin:6px 0 10px; }
    .popup .row-sb { display:flex; justify-content:space-between; align-items:center; gap:10px; }
    .popup .small { font-size:.9rem; }

    /* Center the toast on screen (overrides any bottom placement) */
    #toast {
      position: fixed !important;
      left: 50% !important;
      top: 50% !important;
      transform: translate(-50%, -50%) !important;
      z-index: 1100 !important;
      max-width: 90vw;
      text-align: center;
      border-radius: 12px;
      box-shadow: 0 10px 20px rgba(0,0,0,.15);
    }

    /* === SG Privacy/Data Notice (keepable base styles; injector adds its own too) === */
    #sg-privacy-fab{
      position:fixed; right:12px; bottom:12px; z-index:2147483647;
      padding:10px 12px; border:1px solid #ddd; background:#ffffff; color:#333;
      border-radius:999px; font-size:.9rem; box-shadow:0 2px 10px rgba(0,0,0,.08);
    }
    #sg-privacy-fab:hover{ background:#f7f7f7; }
    #sg-privacy-modal[hidden]{ display:none; }
    #sg-privacy-modal{ position:fixed; inset:0; z-index:2147483646; }
    #sg-privacy-modal .sg-privacy-modal__backdrop{ position:absolute; inset:0; background:rgba(0,0,0,.45); }
    #sg-privacy-modal .sg-privacy-modal__panel{
      position:absolute; right:12px; bottom:64px; width:min(95vw, 360px);
      background:#fff; border:1px solid #e6e6e6; border-radius:14px;
      box-shadow:0 10px 30px rgba(0,0,0,.18); overflow:hidden;
    }
    .sg-privacy-modal__hdr{ display:flex; align-items:center; justify-content:space-between;
      padding:10px 12px; background:#f8f8f8; border-bottom:1px solid #eee; }
    .sg-privacy-modal__hdr h3{ margin:0; font-size:1rem; }
    .sg-privacy-modal__close{ border:0; background:transparent; font-size:1.2rem; line-height:1; cursor:pointer; color:#555; }
    .sg-privacy-modal__content{ padding:12px; font-size:.95rem; line-height:1.5; }
    .sg-privacy-modal__content a{ color:#333; text-decoration:underline; }
    #sg-privacy-toast[hidden]{ display:none; }
    #sg-privacy-toast{ position:fixed; left:50%; transform:translateX(-50%); bottom:80px; z-index:2147483645; max-width:min(92vw, 520px); }
    .sg-privacy-toast__card{ display:flex; gap:6px; align-items:center; padding:10px 12px; background:#111; color:#fff; border-radius:10px; box-shadow:0 6px 20px rgba(0,0,0,.3); font-size:.9rem; }
    .sg-privacy-toast__card a{ color:#fff; text-decoration:underline; }
    .sg-privacy-toast__close{ margin-left:auto; border:0; background:transparent; color:#fff; font-size:1.1rem; cursor:pointer; }
    @media (max-width:480px){
      #sg-privacy-fab{ bottom:56px; }      /* lift if you have a bottom bar */
      #sg-privacy-toast{ bottom:120px; }   /* lift toast above bars */
    }
  </style>
</head>

<body>
  <!-- Header -->
  <header class="app-header">
    <a href="/" class="brand" aria-label="Stone Grill home">
      <img id="logoImg" src="assets/icons/icon-192.png" alt="Stone Grill" class="logo">
      <div class="brand-text">
        <h1>Stone Grill</h1>
        <p>Enjoyable & Relaxing</p>
      </div>
    </a>

    <!-- Cart summary -->
    <div class="cart-summary">
      <div class="total-label">Total</div>
      <div id="cartTotal" class="total-value">â‚±0</div>
      <button id="checkoutBtn" class="btn primary">Checkout</button>
    </div>
  </header>

  <!-- Main -->
  <main class="app-main">
    <!-- Menu -->
    <section class="menu-col">
      <div class="category-bar" id="categoryBar"></div>
      <div id="menuList" class="menu-list"></div>
    </section>

    <!-- Cart + Form -->
    <aside class="cart-col">
      <div class="card highlight breathe">
        <h2 class="card-title">ðŸ¦¾ Your Order</h2>
        <div id="cartItems" class="cart-items"></div>

        <div class="cart-totals">
          <div class="row">
            <span>Subtotal</span>
            <span id="cartSubtotal">â‚±0</span>
          </div>
        </div>

        <div class="cart-actions">
          <button id="clearCartBtn" class="btn ghost">Clear</button>
        </div>
      </div>

      <div class="card">
        <h2 class="card-title">ðŸ‘¤ Customer Info</h2>
        <form id="orderForm" autocomplete="on">
          <label>Full Name
            <input type="text" id="fullName" required placeholder="Juan Dela Cruz">
          </label>

          <label>Mobile Number
            <input type="tel" id="mobileNumber" inputmode="numeric" required placeholder="+63 9XX XXX XXXX">
          </label>

          <label>Order Type</label>
          <div class="inline">
            <label>
              <input type="radio" name="orderType" value="Dine-in" required>
              <span>Dine-in</span>
            </label>
            <label>
              <input type="radio" name="orderType" value="Take-out" required>
              <span>Take-out</span>
            </label>
          </div>

          <div id="personsWrap" class="hidden">
            <label>Number of Persons
              <input type="number" id="persons" min="1" value="1">
            </label>
          </div>

          <div class="inline-2">
            <label>Date
              <input type="date" id="orderDate" required>
            </label>
            <label>Time
              <input type="time" id="orderTime" required>
            </label>
          </div>

          <label>Special Requests
            <textarea id="specialRequests" rows="3" placeholder="Less spicy, extra rice, no peanutsâ€¦"></textarea>
          </label>

          <button type="submit" class="btn primary wide">Submit Order</button>

          <!-- Static Pay/Upload button (fixed location under Submit) -->
          <button id="openPayPopupBtn" type="button" class="btn wide" style="margin-top:10px;">
            Pay / Upload GCash
          </button>
        </form>
      </div>

      <div class="card muted">
         <p style="margin-top:6px; font-size:0.88rem; color:#666;">
           <a href="/privacy-policy.html">Privacy Policy</a> â€¢ 
          <a href="/data-deletion.html">Data Deletion</a>
        </p>
      </div>
    </aside>
  </main>

  <!-- Popups -->
  <div id="categoryPopup" class="popup-backdrop hidden">
    <div class="popup">
      <button class="popup-close" aria-label="Close">Ã—</button>
      <h3 class="popup-title">Browse Categories</h3>
      <div id="popupCategories" class="popup-grid"></div>
    </div>
  </div>

  <div id="itemPopup" class="popup-backdrop hidden">
    <div class="popup">
      <button class="popup-close" aria-label="Close">Ã—</button>
      <div id="itemDetail"></div>
    </div>
  </div>

  <div id="howToOrderPopup" class="popup-backdrop hidden" aria-hidden="true">
    <div class="popup" role="dialog" aria-modal="true" aria-labelledby="howtoTitle">
      <button class="popup-close" aria-label="Close">Ã—</button>
      <h3 id="howtoTitle" class="popup-title">How to Order</h3>
      <ol style="padding-left:20px; margin:10px 0;">
        <li>Select a category and tap <strong>Add</strong> beside each dish.</li>
        <li>Review <strong>Your Order</strong>; adjust quantities or remove items.</li>
        <li>Fill in your details (Full Name, Mobile, Order Type).</li>
        <li>If Dine-in â†’ enter <strong>Number of Persons</strong>.</li>
        <li>Pick your <strong>Date & Time</strong>.</li>
        <li>Click <strong>Submit Order</strong> â€” youâ€™ll see a confirmation toast.</li>
      </ol>
      <p class="small" style="color:#666;">Tip: Keep your phone nearby in case we need to confirm details.</p>
    </div>
  </div>

  <!-- GCash Payment Popup -->
  <div id="paymentPopup" class="popup-backdrop hidden" aria-hidden="true">
    <div class="popup" role="dialog" aria-modal="true" aria-labelledby="payTitle">
      <button class="popup-close" aria-label="Close">Ã—</button>

      <h3 id="payTitle" class="popup-title">Pay with GCash</h3>
      <div class="meta" id="payMeta">Order: <span id="payOrderId">â€”</span> â€¢ Total: <span id="payTotal">â‚±0</span></div>

      <div class="row-sb">
        <div>
          <div class="small">Send payment to this GCash number</div>
          <div class="gcash-number" id="gcashMobileText">+63 9XX XXX XXXX</div>
          <div class="small" id="gcashAccountName" style="opacity:.85;">Account: Stone Grill Restaurant</div>
        </div>
        <button id="btnCopyNumber" class="btn">Copy</button>
      </div>

      <!-- Standalone uploader that posts to Telegram via hidden iframe (no CORS, no Apps Script) -->
      <div class="receipt-upload-block">
        <h3>Upload Gcash Receipt here</h3>

        <!-- Hidden iframe prevents navigation -->
        <iframe name="tgUploadFrame" id="tgUploadFrame" class="hidden" style="display:none"></iframe>

        <!-- One form that always uses sendDocument (works for images & PDFs) -->
        <form id="tgUploadForm" target="tgUploadFrame" method="post" enctype="multipart/form-data" style="display:grid;gap:8px;max-width:360px">
          <input type="hidden" name="chat_id" id="tgChatId">
          <input type="hidden" name="caption" id="tgCaption">
          <!-- Action (endpoint) is set by JS from config: https://api.telegram.org/botTOKEN/sendDocument -->

          <input id="gcashReceiptInput" class="input" type="file" name="document" accept="image/*,application/pdf">
          <button type="button" id="btnSendReceipt" class="btn primary">Send Receipt to Stone Grill</button>
          <div id="receiptStatus" class="receipt-status" aria-live="polite"></div>
        </form>
      </div>
    </div>
  </div>

  <!-- === SG Privacy/Data Notice â€” Single-File Injector (v4) [UPDATED] === -->
  <script>
  (function(){
    // Remove any old duplicates if present
    ['sg-privacy-fab','sg-privacy-modal','sg-privacy-toast'].forEach(function(id){
      var el = document.getElementById(id);
      if (el && el.parentNode) el.parentNode.removeChild(el);
    });
    var oldStyle = document.querySelector('style[data-sg-privacy]');
    if (oldStyle && oldStyle.parentNode) oldStyle.parentNode.removeChild(oldStyle);

    function ready(fn){ if(document.readyState==='loading'){document.addEventListener('DOMContentLoaded',fn);} else { fn(); } }

    ready(function(){
      // --- Inject CSS ---
      var style = document.createElement('style');
      style.setAttribute('data-sg-privacy','v4');
      style.textContent = `
#sg-privacy-fab{
  position:fixed; right:12px; bottom:12px; z-index:2147483647;
  padding:10px 12px; border:1px solid #ddd; background:#ffffff; color:#333;
  border-radius:999px; font-size:.9rem; box-shadow:0 2px 10px rgba(0,0,0,.08);
}
#sg-privacy-fab:hover{ background:#f7f7f7; }
#sg-privacy-modal[hidden]{ display:none; }
#sg-privacy-modal{ position:fixed; inset:0; z-index:2147483646; }
#sg-privacy-modal .sg-privacy-modal__backdrop{ position:absolute; inset:0; background:rgba(0,0,0,.45); }
#sg-privacy-modal .sg-privacy-modal__panel{
  position:absolute; right:12px; bottom:64px; width:min(95vw, 360px);
  background:#fff; border:1px solid #e6e6e6; border-radius:14px;
  box-shadow:0 10px 30px rgba(0,0,0,.18); overflow:hidden;
}
.sg-privacy-modal__hdr{ display:flex; align-items:center; justify-content:space-between;
  padding:10px 12px; background:#f8f8f8; border-bottom:1px solid #eee; }
.sg-privacy-modal__hdr h3{ margin:0; font-size:1rem; }
.sg-privacy-modal__close{ border:0; background:transparent; font-size:1.2rem; line-height:1; cursor:pointer; color:#555; }
.sg-privacy-modal__content{ padding:12px; font-size:.95rem; line-height:1.5; }
.sg-privacy-modal__content a{ color:#333; text-decoration:underline; }
#sg-privacy-toast[hidden]{ display:none; }
#sg-privacy-toast{ position:fixed; left:50%; transform:translateX(-50%); bottom:80px; z-index:2147483645; max-width:min(92vw, 520px); }
.sg-privacy-toast__card{ display:flex; gap:6px; align-items:center; padding:10px 12px; background:#111; color:#fff; border-radius:10px; box-shadow:0 6px 20px rgba(0,0,0,.3); font-size:.9rem; }
.sg-privacy-toast__card a{ color:#fff; text-decoration:underline; }
.sg-privacy-toast__close{ margin-left:auto; border:0; background:transparent; color:#fff; font-size:1.1rem; cursor:pointer; }
@media (max-width:480px){
  #sg-privacy-fab{ bottom:56px; }
  #sg-privacy-toast{ bottom:120px; }
}`;
      document.head.appendChild(style);

      // --- Inject HTML ---
      var wrap = document.createElement('div');
      wrap.innerHTML = `
<button id="sg-privacy-fab" aria-haspopup="dialog" aria-controls="sg-privacy-modal" aria-label="Privacy & Data">
  Privacy â€¢ Data
</button>

<div id="sg-privacy-modal" role="dialog" aria-modal="true" aria-labelledby="sg-privacy-title" hidden>
  <div class="sg-privacy-modal__panel">
    <header class="sg-privacy-modal__hdr">
      <h3 id="sg-privacy-title">Your privacy matters</h3>
      <button class="sg-privacy-modal__close" aria-label="Close">Ã—</button>
    </header>
    <div class="sg-privacy-modal__content">
      <p>Review how we handle your info:</p>
      <p>
        <a href="/privacy-policy.html" target="_blank" rel="noopener">Privacy Policy</a> â€¢
        <a href="/data-deletion.html" target="_blank" rel="noopener">Data Deletion</a>
      </p>
    </div>
  </div>
  <div class="sg-privacy-modal__backdrop" aria-hidden="true"></div>
</div>

<div id="sg-privacy-toast" hidden role="status" aria-live="polite">
  <div class="sg-privacy-toast__card">
    <span>We value your privacy. Read our</span>
    <a href="/privacy-policy.html" target="_blank" rel="noopener">Policy</a>
    <span>and</span>
    <a href="/data-deletion.html" target="_blank" rel="noopener">Deletion</a>.
    <button class="sg-privacy-toast__close" aria-label="Dismiss">Ã—</button>
  </div>
</div>
      `.trim();
      document.body.appendChild(wrap);

      // --- Behavior wiring ---
      var fab = document.getElementById('sg-privacy-fab');
      var modal = document.getElementById('sg-privacy-modal');
      var backdrop = modal.querySelector('.sg-privacy-modal__backdrop');
      var btnClose = modal.querySelector('.sg-privacy-modal__close');
      var toast = document.getElementById('sg-privacy-toast');
      var toastClose = toast.querySelector('.sg-privacy-toast__close');
      var LS_KEY = 'sg_privacy_toast_dismissed_v1';

      function openModal(){ modal.hidden=false; document.body.style.overflow='hidden'; fab.setAttribute('aria-expanded','true'); }
      function closeModal(){ modal.hidden=true; document.body.style.overflow=''; fab.setAttribute('aria-expanded','false'); }

      fab.addEventListener('click', openModal);
      backdrop.addEventListener('click', closeModal);
      btnClose.addEventListener('click', closeModal);
      document.addEventListener('keydown', function(e){ if(e.key==='Escape') closeModal(); });

      try{
        if(localStorage.getItem(LS_KEY)!=='1'){
          toast.hidden=false;
          setTimeout(function(){ toast.hidden=true; }, 6000);
        }
      }catch(e){}
      toastClose.addEventListener('click', function(){
        toast.hidden=true;
        try{ localStorage.setItem(LS_KEY,'1'); }catch(e){}
      });
    });
  })();
  </script>
  <!-- === SG Privacy/Data Notice â€” END [UPDATED] === -->

  <!-- Toast -->
  <div id="toast" class="toast hidden"></div>

  <!-- Scripts -->
  <script src="config.js?v=15"></script>
  <script src="main.js?v=15"></script>

  <!-- Popup controller + Telegram upload (manual only) -->
  <script>
  (function () {
    function showBackdrop(el){ el.classList.add('show'); el.classList.remove('hidden'); el.setAttribute('aria-hidden','false'); }
    function hideBackdrop(el){ el.classList.remove('show'); el.classList.add('hidden'); el.setAttribute('aria-hidden','true'); }

    // Static Pay/Upload button
    (function () {
      var btn = document.getElementById('openPayPopupBtn');
      if (!btn) return;
      btn.addEventListener('click', function(){
        var total = (typeof cartSubtotal === 'function' && Array.isArray(window.cart) && window.cart.length)
          ? cartSubtotal() : null;
        window.showGcashPopup('N/A', total);
      });
    })();

    // Close handlers
    document.addEventListener('click', (e)=>{
      if (e.target.closest('#paymentPopup .popup-close')) {
        hideBackdrop(document.getElementById('paymentPopup'));
      }
    });
    document.getElementById('paymentPopup').addEventListener('click', function(e){
      if (e.target === this) hideBackdrop(this);
    });

    // Copy number
    document.addEventListener('click', async (e)=>{
      if (e.target && e.target.id === 'btnCopyNumber') {
        const txt = (document.getElementById('gcashMobileText')?.textContent || '').trim();
        try { await navigator.clipboard.writeText(txt); e.target.textContent='Copied'; setTimeout(()=>e.target.textContent='Copy',1200); }
        catch { alert('Copy failed. Long-press to copy.'); }
      }
    });

    // Expose popup
    window.showGcashPopup = function(orderId, totalAmount) {
      const pop = document.getElementById('paymentPopup');
      if (!pop) return;

      document.getElementById('payOrderId').textContent = orderId || 'â€”';
      document.getElementById('payTotal').textContent = (typeof totalAmount === 'number'
        ? 'â‚±' + totalAmount.toLocaleString()
        : (totalAmount || 'â‚±0'));

      const mobileTxt = document.getElementById('gcashMobileText');
      const acctName  = document.getElementById('gcashAccountName');
      if (window.APP?.GCASH_MOBILE)       mobileTxt.textContent = window.APP.GCASH_MOBILE;
      if (window.APP?.GCASH_ACCOUNT_NAME) acctName.textContent  = 'Account: ' + window.APP.GCASH_ACCOUNT_NAME;

      window.currentOrderId = orderId || '';
      window.currentOrderTotal = totalAmount || '';

      showBackdrop(pop);
    };

    /* Upload logic (manual only; hidden iframe avoids CORS) */
    (function setupTelegramUpload(){
      var form     = document.getElementById('tgUploadForm');
      var iframe   = document.getElementById('tgUploadFrame');
      var chatIn   = document.getElementById('tgChatId');
      var capIn    = document.getElementById('tgCaption');
      var fileIn   = document.getElementById('gcashReceiptInput');
      var sendBtn  = document.getElementById('btnSendReceipt');
      var statusEl = document.getElementById('receiptStatus');

      if (!form || !iframe || !chatIn || !capIn || !fileIn || !sendBtn) return;

      var token  = (window.APP && window.APP.TELEGRAM_BOT_TOKEN) || '';
      var chatId = (window.APP && window.APP.TELEGRAM_CHAT_ID)   || '';
      if (token) form.action = 'https://api.telegram.org/bot' + encodeURIComponent(token) + '/sendDocument';
      if (chatId) chatIn.value = chatId;

      iframe.addEventListener('load', function(){
        if (statusEl) statusEl.textContent = 'âœ… Receipt sent to our team. Weâ€™ll verify and update you.';
        if (typeof window.showToast === 'function') showToast('Receipt uploaded âœ…', 2000);
        try { fileIn.value = ''; } catch(e){}
      });

      sendBtn.addEventListener('click', function(){
        var f = fileIn.files && fileIn.files[0];
        if (!f){ statusEl.textContent = 'Please select a receipt image or PDF first.'; return; }
        if (!token || !chatId){ statusEl.textContent = 'Bot not configured (token/chat id).'; return; }

        var fullName = (document.getElementById('fullName')?.value || 'Unknown Customer').trim();
        var mobile   = (document.getElementById('mobileNumber')?.value || 'N/A').trim();
        var orderId  = window.currentOrderId || 'N/A';
        var total    = window.currentOrderTotal ? ('â‚±' + window.currentOrderTotal) : '';

        var caption = [
          'ðŸ§¾ GCash Receipt Received',
          'â€¢ Order ID: ' + orderId,
          total ? ('â€¢ Total: ' + total) : '',
          'â€¢ Name: ' + fullName,
          'â€¢ Mobile: ' + mobile
        ].filter(Boolean).join('\n');

        capIn.value = caption;
        statusEl.textContent = 'Sending receiptâ€¦';
        form.submit();
      });
    })();
  })();
  </script>

  <!-- Service worker (optional) -->
  <script>
    if ('serviceWorker' in navigator) {
      const onGithubIo = location.hostname.endsWith('github.io');
      if (!onGithubIo) {
        navigator.serviceWorker.register('pwa/sw.js?v=13').catch(()=>{});
      }
    }
  </script>

  <!-- ===== Toast upgrade: top-center, close button, auto-dismiss, click-to-dismiss ===== -->
  <script>
  (function(){
    // Ensure a toast element exists
    var t = document.getElementById('toast');
    if(!t){
      t = document.createElement('div');
      t.id = 'toast';
      document.body.appendChild(t);
    }

    // Inject compact, top-center styles (won't block page center)
    var css = document.createElement('style');
    css.textContent = `
      #toast{
        position:fixed; left:50%; top:76px; transform:translateX(-50%);
        z-index:1100; max-width:92vw; background:rgba(17,24,39,.96); color:#fff;
        padding:12px 14px; border-radius:12px; box-shadow:0 10px 20px rgba(0,0,0,.15);
        font-size:14px; line-height:1.35; display:none; opacity:0; transition:opacity .18s ease;
      }
      #toast.show{ display:block; opacity:1; }
      #toast .toast-row{ display:flex; align-items:center; gap:10px; }
      #toast .toast-msg{ flex:1; text-align:center; }
      #toast .toast-close{
        appearance:none; border:0; background:transparent; color:#fff; font-size:18px; line-height:1;
        padding:2px 6px; cursor:pointer; opacity:.9;
      }
      #toast .toast-close:active{ transform:translateY(1px); }
    `;
    document.head.appendChild(css);

    var hideTimer = null;

    function hideToast(){
      clearTimeout(hideTimer);
      t.classList.remove('show');
      setTimeout(function(){ if(!t.classList.contains('show')) t.style.display='none'; }, 180);
    }

    function renderToast(msg){
      t.innerHTML = '';
      var row = document.createElement('div'); row.className = 'toast-row';
      var msgEl = document.createElement('div'); msgEl.className = 'toast-msg';
      msgEl.textContent = (msg == null ? '' : String(msg));
      var btn = document.createElement('button'); btn.className = 'toast-close'; btn.setAttribute('aria-label','Close'); btn.textContent = 'Ã—';
      btn.onclick = hideToast;
      row.appendChild(msgEl); row.appendChild(btn);
      t.appendChild(row);
      // Tap anywhere on the toast to dismiss
      t.onclick = hideToast;
    }

    // Replace global showToast so ALL calls use this version
    window.showToast = function(msg, ms){
      try{
        ms = ms || 5000; // default 5s
        renderToast(msg);
        clearTimeout(hideTimer);
        t.style.display = 'block';
        requestAnimationFrame(function(){ t.classList.add('show'); });
        hideTimer = setTimeout(hideToast, ms);
      }catch(e){
        console.warn('[toast-upgrade] error:', e);
        alert(msg);
      }
    };
  })();
  </script>
  <footer style="text-align:center; padding:16px; font-size:0.9em; color:#555; background:#f9f9f9; margin-top:24px;">
  Â© 2025 Stone Grill Restaurant â€¢ 
  <a href="/privacy-policy.html">Privacy Policy</a> â€¢ 
  <a href="/data-deletion.html">Data Deletion</a>
</footer>

</body>
</html>
